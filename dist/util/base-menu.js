import inquirer from 'inquirer';
export class BaseMenu {
    __name = '__menu';
    __type = 'list';
    __message = '';
    __menu;
    async __execute(command) {
        // @ts-expect-error test
        await this[command]();
        // if (cliService.exitAfterCommandExecuted) process.exit()
        await this.run();
    }
    constructor(message, choices, exitChoices) {
        if (message) {
            this.__message = message;
        }
        choices.push(new inquirer.Separator());
        (exitChoices ?? []).forEach((choice) => {
            choices.push(choice);
        });
        choices.push({ name: 'Exit', value: 'exit' });
        this.__menu = {
            choices: [...choices],
            message: this.__message,
            name: this.__name,
            type: this.__type,
        };
    }
    async run(preSelected) {
        const selected = await this._getSelectedValue(preSelected);
        switch (selected) {
            case 'exit':
                process.exit();
                break;
            default:
                await this.__execute(selected);
        }
    }
    async _getSelectedValue(perSelected) {
        if (perSelected) {
            return perSelected;
        }
        return (await inquirer.prompt(this.__menu))[this.__name];
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFzZS1tZW51LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3V0aWwvYmFzZS1tZW51LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sUUFBa0QsTUFBTSxVQUFVLENBQUE7QUFFekUsTUFBTSxPQUFnQixRQUFRO0lBQ3JCLE1BQU0sR0FBRyxRQUFRLENBQUE7SUFDakIsTUFBTSxHQUFHLE1BQU0sQ0FBQTtJQUNmLFNBQVMsR0FBRyxFQUFFLENBQUE7SUFDZCxNQUFNLENBQW9CO0lBRTFCLEtBQUssQ0FBQyxTQUFTLENBQUMsT0FBZTtRQUN0Qyx3QkFBd0I7UUFDeEIsTUFBTSxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQTtRQUNyQiwwREFBMEQ7UUFDMUQsTUFBTSxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUE7SUFDakIsQ0FBQztJQUVELFlBQXNCLE9BQWUsRUFBRSxPQUF5QixFQUFFLFdBQThCO1FBQy9GLElBQUksT0FBTyxFQUFFLENBQUM7WUFDYixJQUFJLENBQUMsU0FBUyxHQUFHLE9BQU8sQ0FBQTtRQUN6QixDQUFDO1FBQ0QsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLFFBQVEsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUNyQztRQUFBLENBQUMsV0FBVyxJQUFJLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLE1BQU0sRUFBRSxFQUFFO1lBQ3ZDLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUE7UUFDckIsQ0FBQyxDQUFDLENBQUE7UUFFRixPQUFPLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQTtRQUM3QyxJQUFJLENBQUMsTUFBTSxHQUFHO1lBQ2IsT0FBTyxFQUFFLENBQUMsR0FBRyxPQUFPLENBQUM7WUFDckIsT0FBTyxFQUFFLElBQUksQ0FBQyxTQUFTO1lBQ3ZCLElBQUksRUFBRSxJQUFJLENBQUMsTUFBTTtZQUNqQixJQUFJLEVBQUUsSUFBSSxDQUFDLE1BQU07U0FDSyxDQUFBO0lBQ3hCLENBQUM7SUFFRCxLQUFLLENBQUMsR0FBRyxDQUFDLFdBQW9CO1FBQzdCLE1BQU0sUUFBUSxHQUFHLE1BQU0sSUFBSSxDQUFDLGlCQUFpQixDQUFDLFdBQVcsQ0FBQyxDQUFBO1FBQzFELFFBQVEsUUFBUSxFQUFFLENBQUM7WUFDbEIsS0FBSyxNQUFNO2dCQUNWLE9BQU8sQ0FBQyxJQUFJLEVBQUUsQ0FBQTtnQkFDZCxNQUFLO1lBQ047Z0JBQ0MsTUFBTSxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFBO1FBQ2hDLENBQUM7SUFDRixDQUFDO0lBRVMsS0FBSyxDQUFDLGlCQUFpQixDQUFDLFdBQW9CO1FBQ3JELElBQUksV0FBVyxFQUFFLENBQUM7WUFDakIsT0FBTyxXQUFXLENBQUE7UUFDbkIsQ0FBQztRQUVELE9BQU8sQ0FBQyxNQUFNLFFBQVEsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFBO0lBQ3pELENBQUM7Q0FDRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBpbnF1aXJlciwgeyBDaG9pY2VDb2xsZWN0aW9uLCBRdWVzdGlvbkNvbGxlY3Rpb24gfSBmcm9tICdpbnF1aXJlcidcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEJhc2VNZW51IHtcblx0cHJpdmF0ZSBfX25hbWUgPSAnX19tZW51J1xuXHRwcml2YXRlIF9fdHlwZSA9ICdsaXN0J1xuXHRwcml2YXRlIF9fbWVzc2FnZSA9ICcnXG5cdHByaXZhdGUgX19tZW51OiBRdWVzdGlvbkNvbGxlY3Rpb25cblxuXHRwcml2YXRlIGFzeW5jIF9fZXhlY3V0ZShjb21tYW5kOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHQvLyBAdHMtZXhwZWN0LWVycm9yIHRlc3Rcblx0XHRhd2FpdCB0aGlzW2NvbW1hbmRdKClcblx0XHQvLyBpZiAoY2xpU2VydmljZS5leGl0QWZ0ZXJDb21tYW5kRXhlY3V0ZWQpIHByb2Nlc3MuZXhpdCgpXG5cdFx0YXdhaXQgdGhpcy5ydW4oKVxuXHR9XG5cblx0cHJvdGVjdGVkIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZywgY2hvaWNlczogQ2hvaWNlQ29sbGVjdGlvbiwgZXhpdENob2ljZXM/OiBDaG9pY2VDb2xsZWN0aW9uKSB7XG5cdFx0aWYgKG1lc3NhZ2UpIHtcblx0XHRcdHRoaXMuX19tZXNzYWdlID0gbWVzc2FnZVxuXHRcdH1cblx0XHRjaG9pY2VzLnB1c2gobmV3IGlucXVpcmVyLlNlcGFyYXRvcigpKVxuXHRcdDsoZXhpdENob2ljZXMgPz8gW10pLmZvckVhY2goKGNob2ljZSkgPT4ge1xuXHRcdFx0Y2hvaWNlcy5wdXNoKGNob2ljZSlcblx0XHR9KVxuXG5cdFx0Y2hvaWNlcy5wdXNoKHsgbmFtZTogJ0V4aXQnLCB2YWx1ZTogJ2V4aXQnIH0pXG5cdFx0dGhpcy5fX21lbnUgPSB7XG5cdFx0XHRjaG9pY2VzOiBbLi4uY2hvaWNlc10sXG5cdFx0XHRtZXNzYWdlOiB0aGlzLl9fbWVzc2FnZSxcblx0XHRcdG5hbWU6IHRoaXMuX19uYW1lLFxuXHRcdFx0dHlwZTogdGhpcy5fX3R5cGUsXG5cdFx0fSBhcyBRdWVzdGlvbkNvbGxlY3Rpb25cblx0fVxuXG5cdGFzeW5jIHJ1bihwcmVTZWxlY3RlZD86IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGNvbnN0IHNlbGVjdGVkID0gYXdhaXQgdGhpcy5fZ2V0U2VsZWN0ZWRWYWx1ZShwcmVTZWxlY3RlZClcblx0XHRzd2l0Y2ggKHNlbGVjdGVkKSB7XG5cdFx0XHRjYXNlICdleGl0Jzpcblx0XHRcdFx0cHJvY2Vzcy5leGl0KClcblx0XHRcdFx0YnJlYWtcblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdGF3YWl0IHRoaXMuX19leGVjdXRlKHNlbGVjdGVkKVxuXHRcdH1cblx0fVxuXG5cdHByb3RlY3RlZCBhc3luYyBfZ2V0U2VsZWN0ZWRWYWx1ZShwZXJTZWxlY3RlZD86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG5cdFx0aWYgKHBlclNlbGVjdGVkKSB7XG5cdFx0XHRyZXR1cm4gcGVyU2VsZWN0ZWRcblx0XHR9XG5cblx0XHRyZXR1cm4gKGF3YWl0IGlucXVpcmVyLnByb21wdCh0aGlzLl9fbWVudSkpW3RoaXMuX19uYW1lXVxuXHR9XG59XG4iXX0=