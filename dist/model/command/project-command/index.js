"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ProjectCommand = void 0;
const shell_service_1 = require("src/service/shell-service");
class ProjectCommand {
    constructor(params) {
        this.__projects = params.projects;
        this.__projectExecuteCmd = params.projectExecuteCmd;
    }
    async execute() {
        if (this.__projects.length === 0)
            throw new Error('No Project selected, check .msh config file for [PROJECTS=]');
        const promises = this.__projects.map(async (pr) => {
            const result = await this.__projectExecuteCmd.execute(pr);
            shell_service_1.shellService.printSuccess(`${pr} - DONE`);
            return { [pr]: result };
        });
        const results = await Promise.all(promises);
        shell_service_1.shellService.printStdMessage(...results);
    }
}
exports.ProjectCommand = ProjectCommand;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvbW9kZWwvY29tbWFuZC9wcm9qZWN0LWNvbW1hbmQvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBRUEsNkRBQXdEO0FBV3hELE1BQWEsY0FBYztJQUl6QixZQUFZLE1BQTZCO1FBQ3ZDLElBQUksQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQTtRQUNqQyxJQUFJLENBQUMsbUJBQW1CLEdBQUcsTUFBTSxDQUFDLGlCQUFpQixDQUFBO0lBQ3JELENBQUM7SUFFTSxLQUFLLENBQUMsT0FBTztRQUNsQixJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxLQUFLLENBQUM7WUFBRSxNQUFNLElBQUksS0FBSyxDQUFDLDZEQUE2RCxDQUFDLENBQUE7UUFDaEgsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFLEVBQUUsRUFBRSxFQUFFO1lBQ2hELE1BQU0sTUFBTSxHQUFHLE1BQU0sSUFBSSxDQUFDLG1CQUFtQixDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQTtZQUN6RCw0QkFBWSxDQUFDLFlBQVksQ0FBQyxHQUFHLEVBQUUsU0FBUyxDQUFDLENBQUE7WUFDekMsT0FBTyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLENBQUE7UUFDekIsQ0FBQyxDQUFDLENBQUE7UUFDRixNQUFNLE9BQU8sR0FBRyxNQUFNLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUE7UUFDM0MsNEJBQVksQ0FBQyxlQUFlLENBQUMsR0FBRyxPQUFPLENBQUMsQ0FBQTtJQUMxQyxDQUFDO0NBQ0Y7QUFuQkQsd0NBbUJDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRXhlY1Jlc3VsdCB9IGZyb20gJ3NyYy9kYWwvc2hlbGwtZGFsJ1xuaW1wb3J0IHsgSUNvbW1hbmQgfSBmcm9tICdzcmMvbW9kZWwvY29tbWFuZCdcbmltcG9ydCB7IHNoZWxsU2VydmljZSB9IGZyb20gJ3NyYy9zZXJ2aWNlL3NoZWxsLXNlcnZpY2UnXG5cbmV4cG9ydCB0eXBlIFByb2plY3RFeGVjdXRvclBhcmFtcyA9IHtcbiAgcHJvamVjdHM6IHN0cmluZ1tdXG4gIHByb2plY3RFeGVjdXRlQ21kOiBJUHJvamVjdENvbW1hbmRcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJUHJvamVjdENvbW1hbmQge1xuICBleGVjdXRlKHByb2plY3Q6IHN0cmluZyk6IFByb21pc2U8RXhlY1Jlc3VsdD5cbn1cblxuZXhwb3J0IGNsYXNzIFByb2plY3RDb21tYW5kIGltcGxlbWVudHMgSUNvbW1hbmQge1xuICBwcml2YXRlIHJlYWRvbmx5IF9fcHJvamVjdHM6IHN0cmluZ1tdXG4gIHByaXZhdGUgcmVhZG9ubHkgX19wcm9qZWN0RXhlY3V0ZUNtZDogSVByb2plY3RDb21tYW5kXG5cbiAgY29uc3RydWN0b3IocGFyYW1zOiBQcm9qZWN0RXhlY3V0b3JQYXJhbXMpIHtcbiAgICB0aGlzLl9fcHJvamVjdHMgPSBwYXJhbXMucHJvamVjdHNcbiAgICB0aGlzLl9fcHJvamVjdEV4ZWN1dGVDbWQgPSBwYXJhbXMucHJvamVjdEV4ZWN1dGVDbWRcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBleGVjdXRlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICh0aGlzLl9fcHJvamVjdHMubGVuZ3RoID09PSAwKSB0aHJvdyBuZXcgRXJyb3IoJ05vIFByb2plY3Qgc2VsZWN0ZWQsIGNoZWNrIC5tc2ggY29uZmlnIGZpbGUgZm9yIFtQUk9KRUNUUz1dJylcbiAgICBjb25zdCBwcm9taXNlcyA9IHRoaXMuX19wcm9qZWN0cy5tYXAoYXN5bmMgKHByKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLl9fcHJvamVjdEV4ZWN1dGVDbWQuZXhlY3V0ZShwcilcbiAgICAgIHNoZWxsU2VydmljZS5wcmludFN1Y2Nlc3MoYCR7cHJ9IC0gRE9ORWApXG4gICAgICByZXR1cm4geyBbcHJdOiByZXN1bHQgfVxuICAgIH0pXG4gICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VzKVxuICAgIHNoZWxsU2VydmljZS5wcmludFN0ZE1lc3NhZ2UoLi4ucmVzdWx0cylcbiAgfVxufVxuIl19