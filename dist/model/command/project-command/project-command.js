import { config } from '#src/util/config';
export class ProjectCommand {
    _projects;
    _command;
    constructor(params) {
        const { command, projects = config().projects } = params;
        this._projects = projects;
        this._command = command;
    }
    async execute() {
        if (this._projects.length === 0) {
            throw new Error('No Project selected, check .msh config file for [PROJECTS=]');
        }
        const promises = this._projects.map((project) => this._command.execute(project));
        return (await Promise.all(promises)).flat();
    }
}
export const projectCommandFactory = (...params) => new ProjectCommand(...params);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvamVjdC1jb21tYW5kLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL21vZGVsL2NvbW1hbmQvcHJvamVjdC1jb21tYW5kL3Byb2plY3QtY29tbWFuZC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sa0JBQWtCLENBQUE7QUFFekMsTUFBTSxPQUFPLGNBQWM7SUFDUCxTQUFTLENBQVU7SUFDbkIsUUFBUSxDQUFtQjtJQUU5QyxZQUFZLE1BQTJEO1FBQ3RFLE1BQU0sRUFBRSxPQUFPLEVBQUUsUUFBUSxHQUFHLE1BQU0sRUFBRSxDQUFDLFFBQVEsRUFBRSxHQUFHLE1BQU0sQ0FBQTtRQUN4RCxJQUFJLENBQUMsU0FBUyxHQUFHLFFBQVEsQ0FBQTtRQUN6QixJQUFJLENBQUMsUUFBUSxHQUFHLE9BQU8sQ0FBQTtJQUN4QixDQUFDO0lBRUQsS0FBSyxDQUFDLE9BQU87UUFDWixJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRSxDQUFDO1lBQ2pDLE1BQU0sSUFBSSxLQUFLLENBQUMsNkRBQTZELENBQUMsQ0FBQTtRQUMvRSxDQUFDO1FBQ0QsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUE7UUFFaEYsT0FBTyxDQUFDLE1BQU0sT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFBO0lBQzVDLENBQUM7Q0FDRDtBQUVELE1BQU0sQ0FBQyxNQUFNLHFCQUFxQixHQUFHLENBQUMsR0FBRyxNQUFvRCxFQUFrQixFQUFFLENBQ2hILElBQUksY0FBYyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB0eXBlIEV4ZWN1dGVSZXN1bHQsIHR5cGUgUHJvamVjdEV4ZWN1dGFibGUgfSBmcm9tICcjc3JjL21vZGVsL2NvbW1hbmQvaW50ZXJmYWNlcydcbmltcG9ydCB7IGNvbmZpZyB9IGZyb20gJyNzcmMvdXRpbC9jb25maWcnXG5cbmV4cG9ydCBjbGFzcyBQcm9qZWN0Q29tbWFuZCB7XG5cdHByb3RlY3RlZCByZWFkb25seSBfcHJvamVjdHM6IHN0cmluZ1tdXG5cdHByb3RlY3RlZCByZWFkb25seSBfY29tbWFuZDogUHJvamVjdEV4ZWN1dGFibGVcblxuXHRjb25zdHJ1Y3RvcihwYXJhbXM6IHsgY29tbWFuZDogUHJvamVjdEV4ZWN1dGFibGU7IHByb2plY3RzPzogc3RyaW5nW10gfSkge1xuXHRcdGNvbnN0IHsgY29tbWFuZCwgcHJvamVjdHMgPSBjb25maWcoKS5wcm9qZWN0cyB9ID0gcGFyYW1zXG5cdFx0dGhpcy5fcHJvamVjdHMgPSBwcm9qZWN0c1xuXHRcdHRoaXMuX2NvbW1hbmQgPSBjb21tYW5kXG5cdH1cblxuXHRhc3luYyBleGVjdXRlKCk6IFByb21pc2U8RXhlY3V0ZVJlc3VsdFtdPiB7XG5cdFx0aWYgKHRoaXMuX3Byb2plY3RzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdObyBQcm9qZWN0IHNlbGVjdGVkLCBjaGVjayAubXNoIGNvbmZpZyBmaWxlIGZvciBbUFJPSkVDVFM9XScpXG5cdFx0fVxuXHRcdGNvbnN0IHByb21pc2VzID0gdGhpcy5fcHJvamVjdHMubWFwKChwcm9qZWN0KSA9PiB0aGlzLl9jb21tYW5kLmV4ZWN1dGUocHJvamVjdCkpXG5cblx0XHRyZXR1cm4gKGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VzKSkuZmxhdCgpXG5cdH1cbn1cblxuZXhwb3J0IGNvbnN0IHByb2plY3RDb21tYW5kRmFjdG9yeSA9ICguLi5wYXJhbXM6IENvbnN0cnVjdG9yUGFyYW1ldGVyczx0eXBlb2YgUHJvamVjdENvbW1hbmQ+KTogUHJvamVjdENvbW1hbmQgPT5cblx0bmV3IFByb2plY3RDb21tYW5kKC4uLnBhcmFtcylcbiJdfQ==