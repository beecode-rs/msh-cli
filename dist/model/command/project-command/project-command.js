import { config } from '#src/util/config';
export class ProjectCommand {
    _projects;
    _command;
    constructor(params) {
        const { command, projects = config().projects } = params;
        this._projects = projects;
        this._command = command;
    }
    async execute() {
        if (this._projects.length === 0) {
            throw new Error('No Project selected, check .msh config file for [PROJECTS=]');
        }
        const promises = this._projects.map((project) => this._command.execute(project));
        return (await Promise.all(promises)).flat();
    }
}
export const projectCommandFactory = (...params) => new ProjectCommand(...params);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvamVjdC1jb21tYW5kLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL21vZGVsL2NvbW1hbmQvcHJvamVjdC1jb21tYW5kL3Byb2plY3QtY29tbWFuZC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sa0JBQWtCLENBQUE7QUFFekMsTUFBTSxPQUFPLGNBQWM7SUFDUCxTQUFTLENBQVU7SUFDbkIsUUFBUSxDQUFtQjtJQUU5QyxZQUFZLE1BQTJEO1FBQ3RFLE1BQU0sRUFBRSxPQUFPLEVBQUUsUUFBUSxHQUFHLE1BQU0sRUFBRSxDQUFDLFFBQVEsRUFBRSxHQUFHLE1BQU0sQ0FBQTtRQUN4RCxJQUFJLENBQUMsU0FBUyxHQUFHLFFBQVEsQ0FBQTtRQUN6QixJQUFJLENBQUMsUUFBUSxHQUFHLE9BQU8sQ0FBQTtJQUN4QixDQUFDO0lBRUQsS0FBSyxDQUFDLE9BQU87UUFDWixJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRSxDQUFDO1lBQ2pDLE1BQU0sSUFBSSxLQUFLLENBQUMsNkRBQTZELENBQUMsQ0FBQTtRQUMvRSxDQUFDO1FBQ0QsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUE7UUFFaEYsT0FBTyxDQUFDLE1BQU0sT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFBO0lBQzVDLENBQUM7Q0FDRDtBQUVELE1BQU0sQ0FBQyxNQUFNLHFCQUFxQixHQUFHLENBQUMsR0FBRyxNQUFvRCxFQUFrQixFQUFFLENBQ2hILElBQUksY0FBYyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFeGVjdXRlUmVzdWx0LCBQcm9qZWN0RXhlY3V0YWJsZSB9IGZyb20gJyNzcmMvbW9kZWwvY29tbWFuZC9pbnRlcmZhY2VzJ1xuaW1wb3J0IHsgY29uZmlnIH0gZnJvbSAnI3NyYy91dGlsL2NvbmZpZydcblxuZXhwb3J0IGNsYXNzIFByb2plY3RDb21tYW5kIHtcblx0cHJvdGVjdGVkIHJlYWRvbmx5IF9wcm9qZWN0czogc3RyaW5nW11cblx0cHJvdGVjdGVkIHJlYWRvbmx5IF9jb21tYW5kOiBQcm9qZWN0RXhlY3V0YWJsZVxuXG5cdGNvbnN0cnVjdG9yKHBhcmFtczogeyBjb21tYW5kOiBQcm9qZWN0RXhlY3V0YWJsZTsgcHJvamVjdHM/OiBzdHJpbmdbXSB9KSB7XG5cdFx0Y29uc3QgeyBjb21tYW5kLCBwcm9qZWN0cyA9IGNvbmZpZygpLnByb2plY3RzIH0gPSBwYXJhbXNcblx0XHR0aGlzLl9wcm9qZWN0cyA9IHByb2plY3RzXG5cdFx0dGhpcy5fY29tbWFuZCA9IGNvbW1hbmRcblx0fVxuXG5cdGFzeW5jIGV4ZWN1dGUoKTogUHJvbWlzZTxFeGVjdXRlUmVzdWx0W10+IHtcblx0XHRpZiAodGhpcy5fcHJvamVjdHMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ05vIFByb2plY3Qgc2VsZWN0ZWQsIGNoZWNrIC5tc2ggY29uZmlnIGZpbGUgZm9yIFtQUk9KRUNUUz1dJylcblx0XHR9XG5cdFx0Y29uc3QgcHJvbWlzZXMgPSB0aGlzLl9wcm9qZWN0cy5tYXAoKHByb2plY3QpID0+IHRoaXMuX2NvbW1hbmQuZXhlY3V0ZShwcm9qZWN0KSlcblxuXHRcdHJldHVybiAoYXdhaXQgUHJvbWlzZS5hbGwocHJvbWlzZXMpKS5mbGF0KClcblx0fVxufVxuXG5leHBvcnQgY29uc3QgcHJvamVjdENvbW1hbmRGYWN0b3J5ID0gKC4uLnBhcmFtczogQ29uc3RydWN0b3JQYXJhbWV0ZXJzPHR5cGVvZiBQcm9qZWN0Q29tbWFuZD4pOiBQcm9qZWN0Q29tbWFuZCA9PlxuXHRuZXcgUHJvamVjdENvbW1hbmQoLi4ucGFyYW1zKVxuIl19