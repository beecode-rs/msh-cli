import { shellService } from '#src/service/shell-service';
import { config } from '#src/util/config';
export class GitTagProjectCommand {
    _rootDir;
    _filterByName;
    constructor(params) {
        const { filterByName, rootDir = config().rootDir } = params;
        this._rootDir = rootDir;
        this._filterByName = filterByName;
    }
    async execute(project) {
        try {
            const filterLine = this._getFilterLine();
            const cmd = `git -C ${this._rootDir}/${project} tag -n9${filterLine} | cat`;
            const result = await shellService.exec(cmd);
            return [{ errorMessage: result.stderr, name: project, stringResult: result.stdout }];
            // eslint-disable-next-line @typescript-eslint/no-explicit-any
        }
        catch (err) {
            return [{ errorMessage: err.message }];
        }
    }
    _getFilterLine() {
        if (!this._filterByName) {
            return '';
        }
        return ` -l "${this._filterByName}"`;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2l0LXRhZy1wcm9qZWN0LWNvbW1hbmQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvbW9kZWwvY29tbWFuZC9wcm9qZWN0LWNvbW1hbmQvZ2l0LXRhZy1wcm9qZWN0LWNvbW1hbmQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLDRCQUE0QixDQUFBO0FBQ3pELE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQTtBQUV6QyxNQUFNLE9BQU8sb0JBQW9CO0lBQ2IsUUFBUSxDQUFRO0lBQ2hCLGFBQWEsQ0FBUztJQUV6QyxZQUFZLE1BQW1EO1FBQzlELE1BQU0sRUFBRSxZQUFZLEVBQUUsT0FBTyxHQUFHLE1BQU0sRUFBRSxDQUFDLE9BQU8sRUFBRSxHQUFHLE1BQU0sQ0FBQTtRQUMzRCxJQUFJLENBQUMsUUFBUSxHQUFHLE9BQU8sQ0FBQTtRQUN2QixJQUFJLENBQUMsYUFBYSxHQUFHLFlBQVksQ0FBQTtJQUNsQyxDQUFDO0lBRUQsS0FBSyxDQUFDLE9BQU8sQ0FBQyxPQUFlO1FBQzVCLElBQUksQ0FBQztZQUNKLE1BQU0sVUFBVSxHQUFHLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQTtZQUN4QyxNQUFNLEdBQUcsR0FBRyxVQUFVLElBQUksQ0FBQyxRQUFRLElBQUksT0FBTyxXQUFXLFVBQVUsUUFBUSxDQUFBO1lBQzNFLE1BQU0sTUFBTSxHQUFHLE1BQU0sWUFBWSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQTtZQUUzQyxPQUFPLENBQUMsRUFBRSxZQUFZLEVBQUUsTUFBTSxDQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQTtZQUNwRiw4REFBOEQ7UUFDL0QsQ0FBQztRQUFDLE9BQU8sR0FBUSxFQUFFLENBQUM7WUFDbkIsT0FBTyxDQUFDLEVBQUUsWUFBWSxFQUFFLEdBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFBO1FBQ3ZDLENBQUM7SUFDRixDQUFDO0lBRVMsY0FBYztRQUN2QixJQUFJLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1lBQ3pCLE9BQU8sRUFBRSxDQUFBO1FBQ1YsQ0FBQztRQUVELE9BQU8sUUFBUSxJQUFJLENBQUMsYUFBYSxHQUFHLENBQUE7SUFDckMsQ0FBQztDQUNEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdHlwZSBFeGVjdXRlUmVzdWx0LCB0eXBlIFByb2plY3RFeGVjdXRhYmxlIH0gZnJvbSAnI3NyYy9tb2RlbC9jb21tYW5kL2ludGVyZmFjZXMnXG5pbXBvcnQgeyBzaGVsbFNlcnZpY2UgfSBmcm9tICcjc3JjL3NlcnZpY2Uvc2hlbGwtc2VydmljZSdcbmltcG9ydCB7IGNvbmZpZyB9IGZyb20gJyNzcmMvdXRpbC9jb25maWcnXG5cbmV4cG9ydCBjbGFzcyBHaXRUYWdQcm9qZWN0Q29tbWFuZCBpbXBsZW1lbnRzIFByb2plY3RFeGVjdXRhYmxlIHtcblx0cHJvdGVjdGVkIHJlYWRvbmx5IF9yb290RGlyOiBzdHJpbmdcblx0cHJvdGVjdGVkIHJlYWRvbmx5IF9maWx0ZXJCeU5hbWU/OiBzdHJpbmdcblxuXHRjb25zdHJ1Y3RvcihwYXJhbXM6IHsgZmlsdGVyQnlOYW1lPzogc3RyaW5nOyByb290RGlyPzogc3RyaW5nIH0pIHtcblx0XHRjb25zdCB7IGZpbHRlckJ5TmFtZSwgcm9vdERpciA9IGNvbmZpZygpLnJvb3REaXIgfSA9IHBhcmFtc1xuXHRcdHRoaXMuX3Jvb3REaXIgPSByb290RGlyXG5cdFx0dGhpcy5fZmlsdGVyQnlOYW1lID0gZmlsdGVyQnlOYW1lXG5cdH1cblxuXHRhc3luYyBleGVjdXRlKHByb2plY3Q6IHN0cmluZyk6IFByb21pc2U8RXhlY3V0ZVJlc3VsdFtdPiB7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IGZpbHRlckxpbmUgPSB0aGlzLl9nZXRGaWx0ZXJMaW5lKClcblx0XHRcdGNvbnN0IGNtZCA9IGBnaXQgLUMgJHt0aGlzLl9yb290RGlyfS8ke3Byb2plY3R9IHRhZyAtbjkke2ZpbHRlckxpbmV9IHwgY2F0YFxuXHRcdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgc2hlbGxTZXJ2aWNlLmV4ZWMoY21kKVxuXG5cdFx0XHRyZXR1cm4gW3sgZXJyb3JNZXNzYWdlOiByZXN1bHQuc3RkZXJyLCBuYW1lOiBwcm9qZWN0LCBzdHJpbmdSZXN1bHQ6IHJlc3VsdC5zdGRvdXQgfV1cblx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5cdFx0fSBjYXRjaCAoZXJyOiBhbnkpIHtcblx0XHRcdHJldHVybiBbeyBlcnJvck1lc3NhZ2U6IGVyci5tZXNzYWdlIH1dXG5cdFx0fVxuXHR9XG5cblx0cHJvdGVjdGVkIF9nZXRGaWx0ZXJMaW5lKCk6IHN0cmluZyB7XG5cdFx0aWYgKCF0aGlzLl9maWx0ZXJCeU5hbWUpIHtcblx0XHRcdHJldHVybiAnJ1xuXHRcdH1cblxuXHRcdHJldHVybiBgIC1sIFwiJHt0aGlzLl9maWx0ZXJCeU5hbWV9XCJgXG5cdH1cbn1cbiJdfQ==