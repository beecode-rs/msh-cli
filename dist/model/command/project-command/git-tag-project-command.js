import { shellService } from '../../../service/shell-service.js';
import { config } from '../../../util/config.js';
export class GitTagProjectCommand {
    _rootDir;
    _filterByName;
    constructor(params) {
        const { filterByName, rootDir = config().rootDir } = params;
        this._rootDir = rootDir;
        this._filterByName = filterByName;
    }
    async execute(project) {
        try {
            const filterLine = this._getFilterLine();
            const cmd = `git -C ${this._rootDir}/${project} tag -n9${filterLine} | cat`;
            const result = await shellService.exec(cmd);
            return [{ errorMessage: result.stderr, name: project, stringResult: result.stdout }];
        }
        catch (err) {
            return [{ errorMessage: err.message }];
        }
    }
    _getFilterLine() {
        if (!this._filterByName) {
            return '';
        }
        return ` -l "${this._filterByName}"`;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2l0LXRhZy1wcm9qZWN0LWNvbW1hbmQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvbW9kZWwvY29tbWFuZC9wcm9qZWN0LWNvbW1hbmQvZ2l0LXRhZy1wcm9qZWN0LWNvbW1hbmQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLDRCQUE0QixDQUFBO0FBQ3pELE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQTtBQUV6QyxNQUFNLE9BQU8sb0JBQW9CO0lBQ2IsUUFBUSxDQUFRO0lBQ2hCLGFBQWEsQ0FBUztJQUV6QyxZQUFZLE1BQW1EO1FBQzlELE1BQU0sRUFBRSxZQUFZLEVBQUUsT0FBTyxHQUFHLE1BQU0sRUFBRSxDQUFDLE9BQU8sRUFBRSxHQUFHLE1BQU0sQ0FBQTtRQUMzRCxJQUFJLENBQUMsUUFBUSxHQUFHLE9BQU8sQ0FBQTtRQUN2QixJQUFJLENBQUMsYUFBYSxHQUFHLFlBQVksQ0FBQTtJQUNsQyxDQUFDO0lBRUQsS0FBSyxDQUFDLE9BQU8sQ0FBQyxPQUFlO1FBQzVCLElBQUksQ0FBQztZQUNKLE1BQU0sVUFBVSxHQUFHLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQTtZQUN4QyxNQUFNLEdBQUcsR0FBRyxVQUFVLElBQUksQ0FBQyxRQUFRLElBQUksT0FBTyxXQUFXLFVBQVUsUUFBUSxDQUFBO1lBQzNFLE1BQU0sTUFBTSxHQUFHLE1BQU0sWUFBWSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQTtZQUUzQyxPQUFPLENBQUMsRUFBRSxZQUFZLEVBQUUsTUFBTSxDQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQTtRQUNyRixDQUFDO1FBQUMsT0FBTyxHQUFRLEVBQUUsQ0FBQztZQUNuQixPQUFPLENBQUMsRUFBRSxZQUFZLEVBQUUsR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUE7UUFDdkMsQ0FBQztJQUNGLENBQUM7SUFFUyxjQUFjO1FBQ3ZCLElBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7WUFDekIsT0FBTyxFQUFFLENBQUE7UUFDVixDQUFDO1FBRUQsT0FBTyxRQUFRLElBQUksQ0FBQyxhQUFhLEdBQUcsQ0FBQTtJQUNyQyxDQUFDO0NBQ0QiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFeGVjdXRlUmVzdWx0LCBQcm9qZWN0RXhlY3V0YWJsZSB9IGZyb20gJyNzcmMvbW9kZWwvY29tbWFuZC9pbnRlcmZhY2VzJ1xuaW1wb3J0IHsgc2hlbGxTZXJ2aWNlIH0gZnJvbSAnI3NyYy9zZXJ2aWNlL3NoZWxsLXNlcnZpY2UnXG5pbXBvcnQgeyBjb25maWcgfSBmcm9tICcjc3JjL3V0aWwvY29uZmlnJ1xuXG5leHBvcnQgY2xhc3MgR2l0VGFnUHJvamVjdENvbW1hbmQgaW1wbGVtZW50cyBQcm9qZWN0RXhlY3V0YWJsZSB7XG5cdHByb3RlY3RlZCByZWFkb25seSBfcm9vdERpcjogc3RyaW5nXG5cdHByb3RlY3RlZCByZWFkb25seSBfZmlsdGVyQnlOYW1lPzogc3RyaW5nXG5cblx0Y29uc3RydWN0b3IocGFyYW1zOiB7IGZpbHRlckJ5TmFtZT86IHN0cmluZzsgcm9vdERpcj86IHN0cmluZyB9KSB7XG5cdFx0Y29uc3QgeyBmaWx0ZXJCeU5hbWUsIHJvb3REaXIgPSBjb25maWcoKS5yb290RGlyIH0gPSBwYXJhbXNcblx0XHR0aGlzLl9yb290RGlyID0gcm9vdERpclxuXHRcdHRoaXMuX2ZpbHRlckJ5TmFtZSA9IGZpbHRlckJ5TmFtZVxuXHR9XG5cblx0YXN5bmMgZXhlY3V0ZShwcm9qZWN0OiBzdHJpbmcpOiBQcm9taXNlPEV4ZWN1dGVSZXN1bHRbXT4ge1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBmaWx0ZXJMaW5lID0gdGhpcy5fZ2V0RmlsdGVyTGluZSgpXG5cdFx0XHRjb25zdCBjbWQgPSBgZ2l0IC1DICR7dGhpcy5fcm9vdERpcn0vJHtwcm9qZWN0fSB0YWcgLW45JHtmaWx0ZXJMaW5lfSB8IGNhdGBcblx0XHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNoZWxsU2VydmljZS5leGVjKGNtZClcblxuXHRcdFx0cmV0dXJuIFt7IGVycm9yTWVzc2FnZTogcmVzdWx0LnN0ZGVyciwgbmFtZTogcHJvamVjdCwgc3RyaW5nUmVzdWx0OiByZXN1bHQuc3Rkb3V0IH1dXG5cdFx0fSBjYXRjaCAoZXJyOiBhbnkpIHtcblx0XHRcdHJldHVybiBbeyBlcnJvck1lc3NhZ2U6IGVyci5tZXNzYWdlIH1dXG5cdFx0fVxuXHR9XG5cblx0cHJvdGVjdGVkIF9nZXRGaWx0ZXJMaW5lKCk6IHN0cmluZyB7XG5cdFx0aWYgKCF0aGlzLl9maWx0ZXJCeU5hbWUpIHtcblx0XHRcdHJldHVybiAnJ1xuXHRcdH1cblxuXHRcdHJldHVybiBgIC1sIFwiJHt0aGlzLl9maWx0ZXJCeU5hbWV9XCJgXG5cdH1cbn1cbiJdfQ==